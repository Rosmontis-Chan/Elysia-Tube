<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ðŸ’– Kawaii Video Downloader âœ¨</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* CSS Kustom untuk Tampilan Mirip Elysia Downloader */
        body {
            font-family: sans-serif;
        }
        .bg-gradient-kawaii {
            /* Warna latar belakang hijau pastel sangat lembut */
            background: linear-gradient(to bottom right, #f0fff0, #ffffff);
        }
        .text-pink-kawaii {
            color: #ff85a2; 
        }
        
        /* Card Utama - Kunci ke Miripan Visual */
        .main-card {
            /* Bayangan lembut, multi-layer untuk efek 'mengambang' dan glow */
            box-shadow: 0 10px 30px rgba(121, 210, 121, 0.2), 0 0 10px rgba(121, 210, 121, 0.1); 
            border: 1px solid #e0ffe0; /* Border sangat tipis dan sangat muda */
            border-radius: 1.5rem; /* Sudut membulat yang konsisten */
            transition: all 0.3s ease;
        }
        .main-card:hover {
            box-shadow: 0 15px 40px rgba(121, 210, 121, 0.3), 0 0 15px rgba(121, 210, 121, 0.15);
        }

        /* Input dan Tombol */
        .input-url {
            border-radius: 1.5rem; /* Input sangat bulat */
            padding-right: 3rem; /* Ruang untuk pita */
        }
        .input-ribbon::after {
            content: 'ðŸŽ€'; 
            position: absolute;
            right: 1.5rem; 
            top: 50%;
            transform: translateY(-50%);
            pointer-events: none;
            z-index: 10;
        }
        .download-button {
            background-color: #8ae98a; /* Hijau cerah tapi lembut */
            box-shadow: 0 3px 6px rgba(138, 233, 138, 0.5);
            border-radius: 1.5rem;
        }
        .download-button:hover {
            background-color: #70d870;
        }
        
        /* Area Hasil */
        .result-card {
            background-color: #f7fff7;
            border: 1px solid #d4ecd4;
            border-radius: 1rem;
        }
        
        /* Animasi Kustom */
        .animate-pulse-slow { animation: pulse 1.5s cubic-bezier(0.4, 0, 0.6, 1) infinite; }
        .animate-fade-in { animation: fade-in 0.5s ease-out forwards; }
        @keyframes fade-in {
            0% { opacity: 0; transform: translateY(10px); }
            100% { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body class="bg-gradient-kawaii min-h-screen flex flex-col items-center justify-center p-4">

    <header class="mb-10 text-center">
        <h1 class="text-5xl font-extrabold text-pink-kawaii">
            ðŸ’– Kawaii Video Downloader âœ¨
        </h1>
    </header>

    <main class="bg-white p-8 main-card w-full max-w-xl">
        
        <form id="downloadForm" class="flex flex-col sm:flex-row gap-4 items-center">
            
            <div class="relative flex-grow input-ribbon w-full">
                <input
                    type="url"
                    id="videoUrl"
                    class="w-full p-4 input-url border border-gray-300 focus:border-green-500 outline-none text-gray-700 shadow-inner-sm"
                    placeholder="Tempel URL Video Di Sini..."
                    required
                />
            </div>
            
            <button
                type="submit"
                id="downloadButton"
                class="download-button text-white font-bold py-4 px-8 transform transition-all duration-200 flex items-center justify-center space-x-1 whitespace-nowrap"
            >
                Unduh âœ¨
            </button>
        </form>

        <div id="loadingState" class="text-center my-8 animate-fade-in hidden">
            <img src="https://media.giphy.com/media/efNqG3K4t3O5h3eF4A/giphy.gif" 
                 alt="Cute Bear Loading" 
                 class="mx-auto w-24 h-24 object-contain" />
            <p class="text-red-500 mt-3 text-lg font-semibold animate-pulse-slow">
                Beruang lucu sedang werbeika kars... ~_~/
            </p>
        </div>

        <div id="errorState" class="bg-red-100 border border-red-300 text-red-700 p-4 rounded-xl flex items-center space-x-3 shadow-md my-4 hidden">
            <span role="img" aria-label="error" class="text-2xl">ðŸ˜¢</span>
            <p id="errorMessage" class="font-medium text-sm"></p>
        </div>

        <div id="videoResult" class="mt-6 p-4 result-card hidden animate-fade-in">
            <h2 class="text-2xl font-bold text-green-700 mb-4 border-b pb-2 border-green-200">Video Siap Diunduh!</h2>
            
            <div class="flex items-start space-x-4 mb-4">
                <img id="videoThumbnail" src="" alt="Video Thumbnail" class="w-32 h-auto rounded-lg shadow-md border border-green-100 object-cover" />
                
                <div class="flex-grow">
                    <h3 id="videoTitle" class="text-xl font-bold text-gray-800 mb-1"></h3>
                    <p id="videoDescription" class="text-sm text-gray-600 mb-2"></p>
                    <div id="smallButtons" class="flex space-x-2">
                        </div>
                </div>
            </div>

            <div id="downloadFormats" class="space-y-3">
                </div>
        </div>
    </main>

    <footer class="mt-8 text-gray-500 text-center text-sm">
        <p>Dibuat dengan cinta fekuk video mitee kawaii! ðŸŒ¸</p>
    </footer>

    <script>
        // =========================================================================
        // !!! API KEY LANGSUNG DI FRONTEND (UNTUK UJI COBA SAJA) !!!
        // =========================================================================
        const RAPIDAPI_KEY = "I9JU23NF394R6HH"; 
        const RAPIDAPI_HOST = "social-media-downloader-api.p.rapidapi.com"; 
        const RAPIDAPI_ENDPOINT = "https://social-media-downloader-api.p.rapidapi.com/api/get_info"; 

        // DOM Elements (disingkat)
        const d = id => document.getElementById(id);
        const downloadForm = d('downloadForm');
        const videoUrlInput = d('videoUrl');
        const downloadButton = d('downloadButton');
        const loadingState = d('loadingState');
        const errorState = d('errorState');
        const errorMessage = d('errorMessage');
        const videoResult = d('videoResult');
        const videoThumbnail = d('videoThumbnail');
        const videoTitle = d('videoTitle');
        const videoDescription = d('videoDescription');
        const smallButtons = d('smallButtons');
        const downloadFormats = d('downloadFormats');

        // Fungsi Helper untuk Membuat Tombol Format Download (Struktur Mirip)
        function createDownloadButton(label, url) {
            const link = document.createElement('a');
            link.href = url;
            link.target = '_blank';
            link.rel = 'noopener noreferrer';
            
            // Styling Tombol Hijau Mirip List Tumpuk
            link.className = 'bg-green-300 hover:bg-green-400 text-green-800 font-medium py-3 px-4 rounded-xl shadow-sm flex items-center justify-between transition-colors duration-200 text-base';
            
            link.innerHTML = `
                <span class="flex items-center space-x-2">
                    <svg class="w-5 h-5 text-green-700" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm-1-11a1 1 0 10-2 0v4.586l-1.293-1.293a1 1 0 00-1.414 1.414l3 3a1 1 0 001.414 0l3-3a1 1 0 00-1.414-1.414L10 11.586V7a1 1 0 00-1-1z" clip-rule="evenodd"></path>
                    </svg>
                    <span>${label}</span>
                </span>
                <span class="text-xl pl-2 text-green-700">></span>
            `;
            return link;
        }

        downloadForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            const url = videoUrlInput.value;

            // Reset UI
            [loadingState, errorState, videoResult].forEach(el => el.classList.add('hidden'));
            downloadFormats.innerHTML = '';
            smallButtons.innerHTML = '';
            
            // Tampilkan Loading
            loadingState.classList.remove('hidden');
            downloadButton.disabled = true;
            downloadButton.innerHTML = 'Memproses...';
            
            try {
                const response = await fetch(`${RAPIDAPI_ENDPOINT}?url=${encodeURIComponent(url)}`, {
                    method: 'GET',
                    headers: {
                        'x-rapidapi-key': RAPIDAPI_KEY,
                        'x-rapidapi-host': RAPIDAPI_HOST
                    }
                });
                
                if (!response.ok) {
                    throw new Error(`Gagal menghubungi API: ${response.statusText}`);
                }
                
                const apiData = await response.json();
                
                if (!apiData || !apiData.download_links) {
                    throw new Error('Tidak ada link unduhan yang ditemukan. URL tidak didukung oleh API ini. ðŸ˜”');
                }

                // Sukses
                loadingState.classList.add('hidden');
                videoResult.classList.remove('hidden');

                // Isi detail video
                videoThumbnail.src = apiData.thumbnail || 'https://via.placeholder.com/150?text=No+Thumbnail';
                videoTitle.textContent = apiData.title || 'Video Title (Nul)';
                videoDescription.textContent = apiData.description ? apiData.description.substring(0, 50) + '...' : 'Downloader';

                // Isi tombol kecil di bawah judul (Menyesuaikan gambar referensi)
                smallButtons.innerHTML = `
                    <span class="bg-gray-200 text-gray-700 text-xs font-medium px-2 py-1 rounded-full">YauTubal</span>
                    <span class="bg-gray-200 text-gray-700 text-xs font-medium px-2 py-1 rounded-full">Downloadr</span>
                `;
                
                // Isi list Format Download (Tumpuk)
                apiData.download_links.forEach((format, index) => {
                    const label = `${index + 1}. Unduh Quall Url Ed.Sing${format.quality || 'HD'} (${format.container || 'MP4'})`;
                    const linkButton = createDownloadButton(label, format.url);
                    downloadFormats.appendChild(linkButton);
                });

            } catch (err) {
                console.error('Error:', err);
                loadingState.classList.add('hidden');
                errorState.classList.remove('hidden');
                errorMessage.textContent = `Terjadi kesalahan: ${err.message || 'Gagal memproses video.'} ðŸ˜”`;
            } finally {
                downloadButton.disabled = false;
                downloadButton.innerHTML = 'Unduh âœ¨';
            }
        });
    </script>
</body>
</html>
